<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Presupuestos de Perniles - Perniles del T√≠o Rudy</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #d4a574 0%, #8b5a3c 100%);
            min-height: 100vh;
            padding: 20px 0;
        }

        header {
            background: linear-gradient(135deg, #2a1810 0%, #5c3a1e 100%);
            color: white;
            text-align: center;
            padding: 30px 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .logo-container {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
            border: 4px solid #d4a574;
            background: white;
        }

        .logo-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        header h1 {
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            margin-bottom: 10px;
            color: white;
        }

        header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .container {
            max-width: 800px;
            margin: 40px auto;
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        h1 {
            text-align: center;
            color: #2a1810;
            margin-bottom: 30px;
            font-size: 2em;
        }

        .form-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border-left: 5px solid #d4a574;
        }

        .form-section h3 {
            color: #2a1810;
            margin-bottom: 20px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
        }

        .form-section h3::before {
            content: "üìã";
            margin-right: 10px;
            font-size: 1.2em;
        }

        label {
            display: block;
            margin-top: 15px;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 0.95em;
        }

        input[type="number"], 
        select, 
        input[type="text"], 
        input[type="datetime-local"], 
        textarea {
            width: 100%;
            padding: 12px 15px;
            margin-top: 5px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1em;
            transition: all 0.3s ease;
            background: white;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #d4a574;
            box-shadow: 0 0 0 3px rgba(212, 165, 116, 0.2);
        }

        input.invalid, textarea.invalid {
            border-color: #e74c3c;
            background: #fff5f5;
        }

        button {
            display: block;
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #d4a574 0%, #8b5a3c 100%);
            color: white;
            border: none;
            border-radius: 12px;
            margin-top: 30px;
            cursor: not-allowed;
            font-size: 1.2em;
            font-weight: bold;
            transition: all 0.3s ease;
            opacity: 0.6;
        }

        button.enabled {
            cursor: pointer;
            opacity: 1;
        }

        button.enabled:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(212, 165, 116, 0.4);
        }

        .result {
            margin-top: 30px;
            padding: 30px;
            background: white;
            border-radius: 15px;
            border: 3px solid #d4a574;
            color: #2a1810;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .result p {
            margin: 12px 0;
            font-size: 1.05em;
            line-height: 1.6;
            color: #333;
        }

        .result strong {
            font-weight: 700;
            color: #2a1810;
        }

        .whatsapp-button {
            margin-top: 20px;
            display: block;
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
            color: white;
            text-align: center;
            text-decoration: none;
            border: none;
            border-radius: 12px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: not-allowed;
            transition: all 0.3s ease;
            opacity: 0.6;
        }

        .whatsapp-button::before {
            content: "üì± ";
            font-size: 1.2em;
        }

        .whatsapp-button.enabled {
            cursor: pointer;
            opacity: 1;
        }

        .whatsapp-button.enabled:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(37, 211, 102, 0.4);
        }

        footer {
            background: linear-gradient(135deg, #2a1810 0%, #5c3a1e 100%);
            color: white;
            text-align: center;
            padding: 25px;
            margin-top: 40px;
            box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.3);
        }

        footer p {
            font-size: 1em;
        }

        #seleccionSalsas {
            margin-top: 20px;
            padding: 20px;
            background: white;
            border: 2px solid #d4a574;
            border-radius: 12px;
        }

        #seleccionSalsas > label {
            color: #d4a574;
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 15px;
        }

        .salsa-item {
            margin: 15px 0;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .salsa-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .salsa-item label {
            margin: 0;
            font-weight: 600;
            color: #495057;
        }

        .salsa-qty {
            width: 80px;
            padding: 8px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
        }

        #errorSalsas {
            color: #e74c3c;
            display: none;
            margin-top: 10px;
            padding: 10px;
            background: #fee;
            border-radius: 8px;
            font-weight: bold;
        }

        .nota-importante {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 12px;
            color: #856404;
            font-weight: 600;
            font-size: 1.05em;
        }

        .gracias {
            text-align: center;
            margin-top: 20px;
            padding: 25px;
            background: linear-gradient(135deg, #d4a574 0%, #8b5a3c 100%);
            color: white;
            border-radius: 12px;
            font-size: 1.3em;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        /* Modal de Bienvenida */
        #modalBienvenida {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .modal-content {
            background-color: #fff;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            text-align: center;
            max-width: 500px;
            width: 90%;
            border: 5px solid #d4a574;
            animation: slideDown 0.5s ease-out;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-content h2 {
            color: #2a1810;
            font-size: 28px;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .modal-content p {
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 15px;
            color: #333;
        }

        .modal-content .destacado {
            background-color: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #d4a574;
            margin: 20px 0;
            font-weight: bold;
            color: #856404;
        }

        #btnAceptar {
            background-color: #28a745;
            color: white;
            padding: 15px 40px;
            font-size: 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        #btnAceptar:hover {
            background-color: #218838;
            transform: scale(1.05);
        }

        .ocultar {
            display: none !important;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 25px;
                margin: 20px 10px;
            }

            header h1 {
                font-size: 1.8em;
            }

            h1 {
                font-size: 1.5em;
            }

            .logo-container {
                width: 90px;
                height: 90px;
            }
        }
    </style>
</head>
<body>
    <!-- Modal de Bienvenida -->
    <div id="modalBienvenida">
        <div class="modal-content">
            <h2>üçñ ¬°Bienvenido! üçñ</h2>
            <p><strong>Calculadora de Presupuestos</strong></p>
            <p>Perniles del T√≠o Rudy</p>
            <div class="destacado">
                M√°s de 30 a√±os brindando calidad y sabor<br>
                en cada evento especial
            </div>
            <p>Complet√° los datos y obten√© tu presupuesto personalizado al instante</p>
            <p style="font-size: 16px; margin-top: 20px;">üìç San Mart√≠n 1716, Neuqu√©n Capital</p>
            <button id="btnAceptar">COMENZAR</button>
        </div>
    </div>

    <header>
        <div class="header-content">
            <div class="logo-container">
                <img src="logo.png" alt="Logo Perniles del T√≠o Rudy">
            </div>
            <div>
                <h1>üçñ Perniles del T√≠o Rudy üçñ</h1>
                <p>La mejor calidad para tu evento especial</p>
            </div>
        </div>
    </header>

    <main class="container">
        <h1>Calculadora de Presupuestos</h1>

        <div class="form-section">
            <h3>Campos Obligatorios</h3>
            <label for="nombre">Nombre completo:</label>
            <input type="text" id="nombre" class="required" placeholder="Ingrese su nombre">
            
            <label for="telefono">N√∫mero de Tel√©fono:</label>
            <input type="text" id="telefono" class="required" placeholder="Ej: 2994520532">
            
            <label for="fechaHora">Fecha y hora del evento:</label>
            <input type="datetime-local" id="fechaHora" class="required-event">
            
            <label for="personas">Cantidad de personas:</label>
            <input type="number" id="personas" min="10" oninput="actualizarOpciones()" class="required" placeholder="M√≠nimo 10 personas">
            
            <label for="tipo">Tipo de pernil:</label>
            <select id="tipo">
                <option value="vacuno">Vacuno</option>
                <option value="cerdo">Cerdo</option>
                <option value="mixto">Mixto</option>
            </select>
        </div>

        <div class="form-section">
            <h3>Salsas Incluidas</h3>
            <label for="salsas">Cantidad de salsas incluidas:</label>
            <input type="number" id="salsas" min="0" value="0" readonly>

            <div id="seleccionSalsas" style="display: none;">
                <label>Seleccione las salsas (m√°ximo: <span id="maxSalsas">0</span>):</label>
                
                <div class="salsa-item">
                    <label>Cuatro Quesos:</label>
                    <input type="number" class="salsa-qty" min="0" value="0" data-salsa="Cuatro Quesos">
                </div>
                <div class="salsa-item">
                    <label>Provenzal:</label>
                    <input type="number" class="salsa-qty" min="0" value="0" data-salsa="Provenzal">
                </div>
                <div class="salsa-item">
                    <label>T√°rtara:</label>
                    <input type="number" class="salsa-qty" min="0" value="0" data-salsa="Tartara">
                </div>
                <div class="salsa-item">
                    <label>Aceitunas:</label>
                    <input type="number" class="salsa-qty" min="0" value="0" data-salsa="Aceitunas">
                </div>
                <div class="salsa-item">
                    <label>Criolla:</label>
                    <input type="number" class="salsa-qty" min="0" value="0" data-salsa="Criolla">
                </div>
                <div class="salsa-item">
                    <label>Berenjenas:</label>
                    <input type="number" class="salsa-qty" min="0" value="0" data-salsa="Berenjenas">
                </div>
                <div class="salsa-item">
                    <label>Prov. con Verdeo:</label>
                    <input type="number" class="salsa-qty" min="0" value="0" data-salsa="Prov. con Verdeo">
                </div>
                <p id="errorSalsas">¬°No puede exceder la cantidad total de salsas!</p>
            </div>
        </div>

        <div class="form-section">
            <h3>Servicios Adicionales</h3>
            <label for="envio">Opci√≥n de env√≠o:</label>
            <select id="envio" onchange="mostrarDatosEvento()">
                <option value="0">Retiro en local (Se retira con una bandeja de horno)</option>
                <option value="10000">Env√≠o a domicilio Neuqu√©n Capital hasta 3 km ($10.000)</option>
                <option value="25000">Env√≠o a domicilio Alrededores ($25.000)</option>
            </select>
            
            <label for="mozo">Servicio de mozo de corte:</label>
            <select id="mozo" onchange="mostrarDatosEvento()">
                <option value="0">Ninguno</option>
                <option value="neuquen">Mozo de corte en Neuqu√©n Capital</option>
                <option value="alrededores">Mozo de corte en Alrededores (hasta 20 kms)</option>
            </select>

            <div id="datosEvento" style="display: none;">
                <label for="direccion">Direcci√≥n del evento:</label>
                <input type="text" id="direccion" class="required-event" placeholder="Calle, n√∫mero, localidad">
            </div>
        </div>

        <div class="form-section">
            <h3>Empanadas (Opcional)</h3>
            <label for="empanadasCarne">Empanadas de carne (unidad - $2.000 c/u):</label>
            <input type="number" id="empanadasCarne" min="0" value="0" placeholder="0">
            
            <label for="empanadasJamonQueso">Empanadas de jam√≥n y queso (unidad - $2.000 c/u):</label>
            <input type="number" id="empanadasJamonQueso" min="0" value="0" placeholder="0">
            
            <label for="empanadasChoclo">Empanadas de choclo (unidad - $2.000 c/u):</label>
            <input type="number" id="empanadasChoclo" min="0" value="0" placeholder="0">

            <label for="empanadasVerdura">Empanadas de verdura (unidad - $2.000 c/u):</label>
            <input type="number" id="empanadasVerdura" min="0" value="0" placeholder="0">
        </div>

        <div class="form-section">
            <h3>Tablas de Fiambre (Opcional)</h3>
            <label for="tablasChicas">Tablas de fiambre Chica - 5 personas - 1 kg aprox. de fiambre ($50.000):</label>
            <input type="number" id="tablasChicas" min="0" value="0" placeholder="0">
            
            <label for="tablasMedianas">Tablas de fiambre Mediana - 10 personas - 2 kg aprox. de fiambre ($100.000):</label>
            <input type="number" id="tablasMedianas" min="0" value="0" placeholder="0">
            
            <label for="tablasGrandes">Tablas de fiambre Grande - 15 personas - 3 kg aprox. de fiambre ($150.000):</label>
            <input type="number" id="tablasGrandes" min="0" value="0" placeholder="0">
        </div>

        <div class="form-section">
            <h3>Pan Sin TACC (Opcional)</h3>
            <label for="panSinTacc">Cantidad de docenas de Pan Sin TACC ($15.000 por docena):</label>
            <input type="number" id="panSinTacc" min="0" value="0" placeholder="0" oninput="validarPanSinTacc()">
            <p id="errorPanSinTacc" style="color: #e74c3c; display: none; margin-top: 10px; padding: 10px; background: #fee; border-radius: 8px; font-weight: bold;">
                ‚ö†Ô∏è El pedido m√≠nimo es de 1 docena (12 unidades)
            </p>
            <p style="color: #856404; margin-top: 10px; padding: 10px; background: #fff3cd; border-radius: 8px; font-weight: 600; font-size: 0.95em;">
                ‚ÑπÔ∏è Nota: La disponibilidad del Pan Sin TACC queda sujeta a confirmaci√≥n
            </p>
        </div>

        <div class="form-section">
            <h3>Observaciones</h3>
            <label for="observaciones">Comentarios adicionales:</label>
            <textarea id="observaciones" rows="4" placeholder="Ingrese aqu√≠ cualquier observaci√≥n o comentario adicional..."></textarea>
        </div>

        <button id="calcularButton" onclick="calcularPresupuesto()" disabled>Calcular Presupuesto</button>
        
        <div class="result" id="resultado"></div>

        <a id="whatsapp-link" class="whatsapp-button" href="#" target="_blank" style="display: none;">Enviar presupuesto por WhatsApp</a>

        <div class="nota-importante">
            ‚ö†Ô∏è Nota Importante: El pernil no va fileteado, es por ello que se ofrece la opci√≥n de mozo de corte
        </div>

        <div class="gracias">
            ‚ù§Ô∏è GRACIAS POR ELEGIR A PERNILES DEL T√çO RUDY ‚ù§Ô∏è
        </div>
    </main>

    <footer>
        <p>&copy; 2024 Perniles del T√≠o Rudy. Todos los derechos reservados.</p>
    </footer>
    
    <script>
        // Funcionalidad del modal de bienvenida
        document.getElementById('btnAceptar').addEventListener('click', function() {
            document.getElementById('modalBienvenida').classList.add('ocultar');
        });

        function actualizarOpciones() {
            const personas = parseInt(document.getElementById('personas').value);
            const tipoSelect = document.getElementById('tipo');
            const salsasInput = document.getElementById('salsas');
            const seleccionSalsasDiv = document.getElementById('seleccionSalsas');
            const maxSalsasSpan = document.getElementById('maxSalsas');

            // Actualizar tipo de pernil
            tipoSelect.innerHTML = '';
            if (personas < 20) {
                tipoSelect.innerHTML += '<option value="vacuno">Vacuno</option>';
                tipoSelect.innerHTML += '<option value="cerdo">Cerdo</option>';
            } else {
                tipoSelect.innerHTML += '<option value="vacuno">Vacuno</option>';
                tipoSelect.innerHTML += '<option value="cerdo">Cerdo</option>';
                tipoSelect.innerHTML += '<option value="mixto">Mixto</option>';
            }

            // Calcular cantidad de salsas
            const totalSalsas = Math.ceil((1/5) * personas) + 1;
            salsasInput.value = totalSalsas;
            maxSalsasSpan.textContent = totalSalsas;
            seleccionSalsasDiv.style.display = 'block';

            // Validaci√≥n corregida de salsas
            document.querySelectorAll('.salsa-qty').forEach(input => {
                input.addEventListener('input', function() {
                    const totalSalsas = parseInt(document.getElementById('salsas').value);
                    const currentSum = Array.from(document.querySelectorAll('.salsa-qty'))
                                          .reduce((sum, el) => sum + parseInt(el.value || 0), 0);
                    
                    if (currentSum > totalSalsas) {
                        document.getElementById('errorSalsas').style.display = 'block';
                        const remaining = totalSalsas - (currentSum - parseInt(this.value));
                        this.value = Math.max(0, Math.min(remaining, parseInt(this.value)));
                    } else {
                        document.getElementById('errorSalsas').style.display = 'none';
                    }
                });
            });

            validarDatos();
        }

        function validarPanSinTacc() {
            const panSinTacc = parseInt(document.getElementById('panSinTacc').value) || 0;
            const errorPanSinTacc = document.getElementById('errorPanSinTacc');
            
            // Si hay valor pero es menor a 1 docena, mostrar error
            if (panSinTacc > 0 && panSinTacc < 1) {
                errorPanSinTacc.style.display = 'block';
                document.getElementById('panSinTacc').value = 0;
            } else {
                errorPanSinTacc.style.display = 'none';
            }
            
            validarDatos();
        }

        function mostrarDatosEvento() {
            const envio = parseInt(document.getElementById('envio').value);
            const mozo = document.getElementById('mozo').value;
            const datosEventoDiv = document.getElementById('datosEvento');
            
            // Mostrar campo de direcci√≥n si hay env√≠o o mozo
            if (envio !== 0 || mozo !== '0') {
                datosEventoDiv.style.display = 'block';
            } else {
                datosEventoDiv.style.display = 'none';
                document.getElementById('direccion').value = ''; // Limpiar direcci√≥n si no se necesita
            }
            
            validarDatos();
        }

        function validarDatos() {
            const nombre = document.getElementById('nombre').value.trim();
            const telefono = document.getElementById('telefono').value.trim();
            const personas = parseInt(document.getElementById('personas').value);
            const fechaHora = document.getElementById('fechaHora').value;
            const envio = parseInt(document.getElementById('envio').value);
            const mozo = document.getElementById('mozo').value;
            const direccion = document.getElementById('direccion').value.trim();
            
            const calcularButton = document.getElementById('calcularButton');
            const whatsappButton = document.getElementById('whatsapp-link');
            
            // Identificar qu√© campos faltan
            let camposFaltantes = [];
            
            if (!nombre) camposFaltantes.push('Nombre completo');
            if (!telefono) camposFaltantes.push('N√∫mero de Tel√©fono');
            if (isNaN(personas) || personas < 10) camposFaltantes.push('Cantidad de personas (m√≠nimo 10)');
            if (!fechaHora) camposFaltantes.push('Fecha y hora del evento');
            if ((envio !== 0 || mozo !== '0') && !direccion) camposFaltantes.push('Direcci√≥n del evento');
            
            const camposValidos = camposFaltantes.length === 0;
            
            // Actualizar el texto del bot√≥n con mensaje claro
            if (!camposValidos) {
                calcularButton.textContent = `‚ö†Ô∏è Faltan datos: ${camposFaltantes.join(', ')}`;
                calcularButton.style.fontSize = camposFaltantes.length > 2 ? '0.95em' : '1.2em';
            } else {
                calcularButton.textContent = 'Calcular Presupuesto';
                calcularButton.style.fontSize = '1.2em';
            }
            
            calcularButton.disabled = !camposValidos;
            calcularButton.classList.toggle('enabled', camposValidos);
            whatsappButton.style.display = camposValidos ? 'block' : 'none';
            whatsappButton.classList.toggle('enabled', camposValidos);
        }

        function calcularPresupuesto() {
            const nombre = document.getElementById('nombre').value.trim();
            const telefono = document.getElementById('telefono').value.trim();
            const personas = parseInt(document.getElementById('personas').value);
            let envio = parseInt(document.getElementById('envio').value);
            const mozoSelect = document.getElementById('mozo').value;
            const tipo = document.getElementById('tipo').value;
            const salsasInput = parseInt(document.getElementById('salsas').value);
            const direccion = document.getElementById('direccion').value.trim();
            const fechaHora = document.getElementById('fechaHora').value;
            const observaciones = document.getElementById('observaciones').value.trim();
            const empanadasCarne = parseInt(document.getElementById('empanadasCarne').value) || 0;
            const empanadasJamonQueso = parseInt(document.getElementById('empanadasJamonQueso').value) || 0;
            const empanadasChoclo = parseInt(document.getElementById('empanadasChoclo').value) || 0;
            const empanadasVerdura = parseInt(document.getElementById('empanadasVerdura').value) || 0;
            const tablasChicas = parseInt(document.getElementById('tablasChicas').value) || 0;
            const tablasMedianas = parseInt(document.getElementById('tablasMedianas').value) || 0;
            const tablasGrandes = parseInt(document.getElementById('tablasGrandes').value) || 0;
            const panSinTacc = parseInt(document.getElementById('panSinTacc').value) || 0;

            // Validar salsas
            const salsas = {};
            let sumaSalsas = 0;
            document.querySelectorAll('.salsa-qty').forEach(input => {
                const salsaName = input.getAttribute('data-salsa');
                const qty = parseInt(input.value || 0);
                if (qty > 0) {
                    salsas[salsaName] = qty;
                    sumaSalsas += qty;
                }
            });

            if (sumaSalsas > salsasInput) {
                alert("¬°La suma de salsas supera el m√°ximo permitido!");
                return;
            }
            
            // C√°lculos
            const panesPorPersona = 4;
            
            // Determinar el precio del pernil seg√∫n la fecha del evento
            let costoPorPersona;
            const fechaEvento = new Date(fechaHora);
            const fechaLimite = new Date('2025-12-01T00:00:00');
            
            if (fechaEvento >= fechaLimite) {
                // Precios a partir del 01/12/2025
                costoPorPersona = personas < 20 ? 13000 : 12000;
            } else {
                // Precios antes del 01/12/2025
                costoPorPersona = personas < 20 ? 12000 : 11000;
            }
            
            const costoEmpanada = 2000;
            const costoTablasChicas = 50000;
            const costoTablasMedianas = 100000;
            const costoTablasGrandes = 150000;
            const costoPanSinTacc = 15000;
            
            const totalPanes = panesPorPersona * personas;
            const totalCostoPersonas = costoPorPersona * personas;
            const totalEmpanadasCarne = empanadasCarne * costoEmpanada;
            const totalEmpanadasJamonQueso = empanadasJamonQueso * costoEmpanada;
            const totalEmpanadasChoclo = empanadasChoclo * costoEmpanada;
            const totalEmpanadasVerdura = empanadasVerdura * costoEmpanada;
            const totalTablasChicas = tablasChicas * costoTablasChicas;
            const totalTablasMedianas = tablasMedianas * costoTablasMedianas;
            const totalTablasGrandes = tablasGrandes * costoTablasGrandes;
            const totalPanSinTacc = panSinTacc * costoPanSinTacc;
            
            let mozos = 0;
            let mozo = 0;
            let mozoText = 'Ninguno';
            
            if (mozoSelect !== '0') {
                mozos = Math.ceil(personas / 50);
                
                // Calcular precio por mozo seg√∫n cantidad de personas y ubicaci√≥n
                if (personas >= 10 && personas <= 39) {
                    if (mozoSelect === 'neuquen') {
                        mozo = 40000;
                        mozoText = 'Mozo de corte en Neuqu√©n Capital';
                    } else if (mozoSelect === 'alrededores') {
                        mozo = 60000;
                        mozoText = 'Mozo de corte en Alrededores (hasta 20 kms)';
                    }
                } else if (personas >= 40) {
                    if (mozoSelect === 'neuquen') {
                        mozo = 50000;
                        mozoText = 'Mozo de corte en Neuqu√©n Capital';
                    } else if (mozoSelect === 'alrededores') {
                        mozo = 70000;
                        mozoText = 'Mozo de corte en Alrededores (hasta 20 kms)';
                    }
                }
                
                mozo *= mozos;
                envio = 0; // Si hay mozo, no hay env√≠o
            }

            const totalPresupuesto = totalCostoPersonas + 
                totalEmpanadasCarne + totalEmpanadasJamonQueso + totalEmpanadasChoclo + totalEmpanadasVerdura +
                totalTablasChicas + totalTablasMedianas + totalTablasGrandes + totalPanSinTacc + envio + mozo;

            // Mensaje WhatsApp - Formato Profesional
            const linea = '‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ';
            
            let whatsappMessage = `üë®‚Äçüç≥ *SERVICIO DE PERNIL*\n`;
            whatsappMessage += `*T√çO RUDY*\n\n`;
            whatsappMessage += `San Mart√≠n 1716\n`;
            whatsappMessage += `Cel. 2994520532\n`;
            whatsappMessage += `${linea}\n\n`;
            
            // üë§ CLIENTE
            whatsappMessage += `üë§ *CLIENTE*\n`;
            whatsappMessage += `Nombre: ${nombre}\n`;
            whatsappMessage += `Tel√©fono: ${telefono}\n`;
            whatsappMessage += `${linea}\n\n`;
            
            // üìã DETALLE DEL PEDIDO
            whatsappMessage += `üìã *DETALLE DEL PEDIDO*\n`;
            whatsappMessage += `‚Ä¢ Pernil: ${tipo.toUpperCase()} ü•© (${personas} personas)\n`;
            whatsappMessage += `‚Ä¢ Panes: ${totalPanes} unidades (Tipo: √ÅRABE) ü•ñ\n`;
            
            // Salsas seleccionadas
            if (Object.keys(salsas).length > 0) {
                whatsappMessage += `  Salsas seleccionadas:\n`;
                Object.entries(salsas).forEach(([salsa, cantidad]) => {
                    whatsappMessage += `  ‚úì ${salsa} (${cantidad})\n`;
                });
            }
            
            // Empanadas
            if (empanadasCarne > 0 || empanadasJamonQueso > 0 || empanadasChoclo > 0 || empanadasVerdura > 0) {
                whatsappMessage += `‚Ä¢ Empanadas:\n`;
                if (empanadasCarne > 0) whatsappMessage += `  ‚úì Carne: ${empanadasCarne} unid.\n`;
                if (empanadasJamonQueso > 0) whatsappMessage += `  ‚úì Jam√≥n/Queso: ${empanadasJamonQueso} unid.\n`;
                if (empanadasChoclo > 0) whatsappMessage += `  ‚úì Choclo: ${empanadasChoclo} unid.\n`;
                if (empanadasVerdura > 0) whatsappMessage += `  ‚úì Verdura: ${empanadasVerdura} unid.\n`;
            }
            
            // Tablas de fiambre
            if (tablasChicas > 0 || tablasMedianas > 0 || tablasGrandes > 0) {
                whatsappMessage += `‚Ä¢ Tablas de fiambre:\n`;
                if (tablasChicas > 0) whatsappMessage += `  ‚úì Chica: ${tablasChicas} unid.\n`;
                if (tablasMedianas > 0) whatsappMessage += `  ‚úì Mediana: ${tablasMedianas} unid.\n`;
                if (tablasGrandes > 0) whatsappMessage += `  ‚úì Grande: ${tablasGrandes} unid.\n`;
            }
            
            // Pan Sin TACC
            if (panSinTacc > 0) {
                whatsappMessage += `‚Ä¢ Pan Sin TACC: ${panSinTacc} docena(s) - ${(panSinTacc * 12)} unidades\n`;
                whatsappMessage += `  ‚ö†Ô∏è *Sujeto a disponibilidad*\n`;
            }
            
            whatsappMessage += `${linea}\n\n`;
            
            // üöö ENTREGA
            // Formatear fecha y hora
            const fechaObj = new Date(fechaHora);
            const dias = ['Domingo', 'Lunes', 'Martes', 'Mi√©rcoles', 'Jueves', 'Viernes', 'S√°bado'];
            const meses = ['enero', 'febrero', 'marzo', 'abril', 'mayo', 'junio', 'julio', 'agosto', 'septiembre', 'octubre', 'noviembre', 'diciembre'];
            const diaSemana = dias[fechaObj.getDay()];
            const dia = fechaObj.getDate();
            const mes = meses[fechaObj.getMonth()];
            const anio = fechaObj.getFullYear().toString().slice(-2);
            const hora = fechaObj.getHours().toString().padStart(2, '0');
            const minutos = fechaObj.getMinutes().toString().padStart(2, '0');
            
            whatsappMessage += `üöö *ENTREGA*\n`;
            whatsappMessage += `Fecha: ${diaSemana} ${dia}/${fechaObj.getMonth() + 1}/${anio}\n`;
            whatsappMessage += `Horario: ${hora}:${minutos} hs\n`;
            
            if (envio === 0 && mozo === 0) {
                whatsappMessage += `Modalidad: Retira por local\n`;
                whatsappMessage += `(Se retira con bandeja de horno)\n`;
            } else if (envio !== 0) {
                whatsappMessage += `Modalidad: Env√≠o a domicilio\n`;
                whatsappMessage += `Direcci√≥n: ${direccion}\n`;
            } else if (mozo !== 0) {
                whatsappMessage += `Modalidad: ${mozoText}\n`;
                whatsappMessage += `Direcci√≥n: ${direccion}\n`;
            }
            
            whatsappMessage += `${linea}\n\n`;
            
            // üí∞ RESUMEN DE CUENTA
            whatsappMessage += `üí∞ *RESUMEN DE CUENTA*\n`;
            whatsappMessage += `Total: $${totalPresupuesto.toLocaleString('es-AR')}\n`;
            whatsappMessage += `Se√±a: $____________\n`;
            whatsappMessage += `SALDO A PAGAR: $____________\n`;
            whatsappMessage += `${linea}\n\n`;
            
            // Observaciones si existen
            if (observaciones) {
                whatsappMessage += `üìù *OBSERVACIONES:*\n${observaciones}\n\n`;
            }
            
            // Mensaje de cierre
            whatsappMessage += `_¬°Gracias por elegirnos para tu evento!_ üë®‚Äçüç≥\n\n`;
            whatsappMessage += `_Nota: El pernil no va fileteado, por ello ofrecemos servicio de mozo de corte_`;
                       
            // Actualizar resultados (sin mensaje de Google Sheets)
            document.getElementById('resultado').innerHTML = `
                <p><strong>Nombre:</strong> ${nombre}</p>
                <p><strong>Tel√©fono:</strong> ${telefono}</p>
                <p><strong>Personas:</strong> ${personas}</p>
                <p><strong>Tipo de pernil:</strong> ${tipo.charAt(0).toUpperCase() + tipo.slice(1)}</p>
                <p><strong>Salsas:</strong> ${Object.entries(salsas).map(([k, v]) => `${k} (${v})`).join(', ') || 'Ninguna'}</p>
                <p><strong>Panes √°rabes:</strong> ${totalPanes}</p>
                <p><strong>Costo Pernil:</strong> ${totalCostoPersonas.toLocaleString('es-AR')}</p>
                ${empanadasCarne > 0 ? `<p><strong>Empanadas de carne:</strong> ${totalEmpanadasCarne.toLocaleString('es-AR')}</p>` : ''}
                ${empanadasJamonQueso > 0 ? `<p><strong>Empanadas de jam√≥n y queso:</strong> ${totalEmpanadasJamonQueso.toLocaleString('es-AR')}</p>` : ''}
                ${empanadasChoclo > 0 ? `<p><strong>Empanadas de choclo:</strong> ${totalEmpanadasChoclo.toLocaleString('es-AR')}</p>` : ''}
                ${empanadasVerdura > 0 ? `<p><strong>Empanadas de verdura:</strong> ${totalEmpanadasVerdura.toLocaleString('es-AR')}</p>` : ''}
                ${tablasChicas > 0 ? `<p><strong>Tablas Chicas:</strong> ${totalTablasChicas.toLocaleString('es-AR')}</p>` : ''}
                ${tablasMedianas > 0 ? `<p><strong>Tablas Medianas:</strong> ${totalTablasMedianas.toLocaleString('es-AR')}</p>` : ''}
                ${tablasGrandes > 0 ? `<p><strong>Tablas Grandes:</strong> ${totalTablasGrandes.toLocaleString('es-AR')}</p>` : ''}
                ${panSinTacc > 0 ? `<p><strong>Pan Sin TACC:</strong> ${panSinTacc} docena(s) - ${(panSinTacc * 12)} unidades (${totalPanSinTacc.toLocaleString('es-AR')})</p>
                <p style="background: rgba(255,193,7,0.3); padding: 10px; border-radius: 8px; margin-top: 5px; font-weight: bold; color: #2a1810; font-size: 0.95em;">‚ö†Ô∏è IMPORTANTE: LA DISPONIBILIDAD DEL PAN SIN TACC QUEDA SUJETA A CONFIRMACI√ìN</p>` : ''}
                ${envio === 0 && mozo === 0 ? `<p><strong>Retiro:</strong> En local (Se retira con una bandeja de horno)</p>` : ''}
                ${envio !== 0 ? `<p><strong>Env√≠o:</strong> ${envio.toLocaleString('es-AR')}</p>` : ''}
                ${mozo !== 0 ? `<p><strong>Servicio de mozo:</strong> ${mozoText} (${mozo.toLocaleString('es-AR')})</p>` : ''}
                <p><strong>Fecha y hora:</strong> ${fechaHora}</p>
                ${(envio !== 0 || mozo !== 0) ? `<p><strong>Direcci√≥n:</strong> ${direccion}</p>` : ''}
                ${observaciones ? `<p><strong>Observaciones:</strong> ${observaciones}</p>` : ''}
                <p style="font-size: 1.4em; margin-top: 20px; padding: 15px; background: #f8f9fa; border: 2px solid #d4a574; border-radius: 10px; color: #2a1810;"><strong>TOTAL:</strong> $${totalPresupuesto.toLocaleString('es-AR')}</p>
            `;

            // Configurar el enlace de WhatsApp para que abra directamente
            const whatsappLink = document.getElementById('whatsapp-link');
            const whatsappUrl = `https://wa.me/2994520532?text=${encodeURIComponent(whatsappMessage)}`;
            whatsappLink.href = whatsappUrl;
        }

        // Event listeners
        document.getElementById('nombre').addEventListener('input', validarDatos);
        document.getElementById('telefono').addEventListener('input', validarDatos);
        document.getElementById('personas').addEventListener('input', validarDatos);
        document.getElementById('direccion').addEventListener('input', validarDatos);
        document.getElementById('fechaHora').addEventListener('input', validarDatos);
        document.getElementById('observaciones').addEventListener('input', validarDatos);
    </script>
</body>
</html>















